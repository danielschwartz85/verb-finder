<!DOCTYPE html>
<html lang="en">
<head>
  <title>爪 驻注</title>
  <link rel="shortcut icon" href="eye.png">
  <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 80%;
      align-items: center;
      margin: auto;
      padding: 10px;
      margin-bottom: 25px;
      text-align: center;
    }
    .search {
      text-align: center;
      margin-top: 35px;
    }
    .search input {
      height: 26px;
      width: 200px;
    }
    .search button {
      height: 32px;
    }
    td, th {
      border: 1px solid #dddddd;
      text-align: center;
      padding: 8px;
    }
    tr:nth-child(even) {
      background-color: #dddddd;
    }
    h2 {
      text-align: center;
    }
    footer {
      text-align: center;
      margin-bottom: 20px;
    }
  </style>
</head>
<body onload="loaded()">
  <script>
    window.eyes = [
    {
        "actions": [
            "..",
            "..",
            "..",
            "..",
            "..",
            "..",
            ".砖.",
            ".专.住",
            "..",
            "..专",
            "..",
            "..拽",
            "..",
            "..",
            ".注.住",
            "..",
            ".拽.",
            "..",
            "..砖",
            ".爪.",
            ".",
            ".注",
            "住..注",
            "住..",
            "注..",
            "驻.住.拽",
            "拽..",
            "拽..",
            "拽..",
            "拽.专.",
            "专.",
            "专..砖",
            "专..",
            "专..",
            "专.注.砖",
            "砖..",
            "砖.转.祝",
            "转.."
        ],
        "name": "专转 拽驻转转",
    },
    {
        "actions": [
            "..专",
            "..",
            "..",
            "..",
            "..拽",
            ".注",
            ".注.专",
            "..",
            "..",
            "..抓",
            "..",
            "..",
            "..拽",
            ".专.",
            ".专.",
            "..注",
            ".专.",
            "..",
            ".驻.",
            "..",
            "..抓",
            ".拽.",
            ".转.",
            ".砖.",
            "住..",
            "住.驻.",
            "注..祝",
            "注..",
            "注.砖.",
            "驻..专",
            "驻..",
            "驻..",
            "驻.住.拽",
            "驻.专.拽",
            "爪..专",
            "爪.注.拽",
            "拽..",
            "拽.专.",
            "专..注",
            "专..拽",
            "转.."
        ],
        "name": "专转 砖驻/砖砖"
    },
    {
        "actions": [
            "..",
            "..",
            "..",
            ".注",
            "..",
            ".注",
            ".专.砖",
            ".砖.",
            "..专",
            "..拽",
            "..专",
            "..",
            "..砖",
            "..抓",
            ".拽.专",
            "..注",
            ".砖.",
            "..",
            "..",
            ".注.",
            "住..",
            "拽.爪.",
            "专..注",
            "专..",
            "砖..",
            "专.爪.",
            "砖.."
        ],
        "name": "专转 拽转"
    },
    {
        "actions": [
            "..专",
            "..",
            "..",
            "..",
            "..",
            "..专",
            "..",
            ".住.",
            "..",
            ".专",
            ".砖.",
            "住..注",
            "注..",
            "注.爪.专",
            "注.拽.砖",
            "爪..专",
            "专..",
            "砖..",
            "转.."
        ],
        "name": "专转  砖 专抓"
    },
    {
        "actions": [
            "..",
            "..",
            "..",
            "..专",
            "..",
            ".拽.",
            "..专",
            "..",
            "..专",
            "..拽",
            "..抓",
            ".拽.",
            "注..",
            "注.爪.",
            "专..砖",
            "转.."
        ],
        "name": "专转 驻专"
    },
    {
        "actions": [
            "..拽",
            "..",
            ".爪.",
            ".转.",
            "驻..专",
            "驻.转.专",
            "拽.爪.",
            "砖..专",
            "转.拽.注"
        ],
        "name": "专转 "
    },
    {
        "actions": [
            "..",
            ".注",
            "..",
            "..",
            "..专",
            ".专.",
            ".砖.",
            ".砖.",
            "..注",
            ".注.",
            ".注.",
            "..",
            "住..",
            "住..专",
            "住..",
            "注..专",
            "驻.住.拽",
            "驻.转.",
            "拽.砖.",
            "专..砖",
            "砖..",
            "砖..专",
            "砖..",
            "砖.拽.",
            "转..",
            "转.."
        ],
        "name": "专转 拽转"
    },
    {
        "actions": [
            "..",
            "..",
            "..",
            "..",
            ".专.",
            "..专",
            ".住.",
            ".专.",
            "..",
            "住..专",
            "注..",
            "注..",
            "注.爪.专",
            "注.专.注.专",
            "爪..爪.",
            "拽..",
            "拽..抓",
            "专..",
            "砖..专"
        ],
        "name": "专转 转转"
    },
    {
        "actions": [
            "..抓",
            ".拽.",
            "..",
            "..",
            "..专",
            "..注",
            "住..专",
            "住..",
            "注..",
            "注..",
            "注.拽.砖",
            "注..",
            "专..",
            "专..砖",
            "砖.."
        ],
        "name": "专转 "
    },
    {
        "actions": [
            ".砖.",
            ".拽.专",
            "..",
            "..拽",
            ".注",
            ".专.砖",
            ".砖.",
            ".注.",
            "..",
            "..抓",
            ".住.专",
            ".转.专",
            "..",
            ".注.住",
            ".专..专",
            "住..",
            "住..专",
            "住.驻.拽",
            "注.爪.",
            "注.拽.砖",
            "驻..转",
            "驻.专.拽",
            "拽.爪.",
            "砖..",
            "砖..",
            "砖..",
            "转..注"
        ],
        "name": "专转   爪"
    },
    {
        "actions": [
            "..",
            "..",
            "..",
            ".专.拽",
            "..专",
            "..",
            ".爪.",
            ".砖.",
            "住..注",
            "住.驻.",
            "注..",
            "爪..专",
            "拽..",
            "专..砖",
            "专.爪."
        ],
        "name": "专转 爪注转"
    }
  ]
  </script>
  <script>
    function buildDervis(eyes = window.eyes, notFoundtext = '') {
      const table = document.getElementById('derivs')
      table.innerHTML = eyes.length ? '' : notFoundtext;

      for (const eye of eyes) {
        const tr = document.createElement('tr')
        let td = document.createElement('td')
        let span = document.createElement('span')
        td.appendChild(span)
        tr.appendChild(td)

        for (const action of eye.actions) {
          let text;
          if (eye.found && eye.found.includes(action)) {
            text = document.createElement('mark')
          } else {
            text = document.createElement('span')
          }
          text.textContent = `${action},  `
          span.appendChild(text)
        }

        td = document.createElement('td')
        span = document.createElement('span')
        span.textContent = eye.name
        td.appendChild(span)
        tr.appendChild(td)
        table.appendChild(tr)
      }
    }
  
    function findVerb() {
      const verb = document.getElementById('verb-input').value
      if (!verb) { 
        buildDervis()
        return;
       }
      
      const verbList = fromVerbToVerbList(verb)
      const foundEyes = []
      for (const {name, actions} of eyes) {
        const found = actions.filter(a => verbList.includes(a))
        if (found.length) {
          foundEyes.push({name, actions, found})
        }
      }
      const notFoundtext = `"${verb}" : 爪 专转 注专 驻注`
      buildDervis(foundEyes, notFoundtext)
    }

    function fromVerbToVerbList(verb) {
      let cleanVerb = verb.replace(/\s+/g,'')
      cleanVerb = cleanVerb.replace(/\./g, '')
      const verbArry  = cleanVerb.split('')
      return perm(verbArry).map(arr => arr.join('.'))
    }

    // Returns all the permutations of a given array:
    function perm(xs) {
      let ret = [];
      for (let i = 0; i < xs.length; i = i + 1) {
        let rest = perm(xs.slice(0, i).concat(xs.slice(i + 1)));

        if(!rest.length) {
          ret.push([xs[i]])
        } else {
          for(let j = 0; j < rest.length; j = j + 1) {
            ret.push([xs[i]].concat(rest[j]))
          }
        }
      }
      return ret;
    }

    function loaded() {
      const input = document.getElementById('verb-input');
      input.addEventListener("keyup", function(event) {
          if (event.key === "Enter") {
            findVerb()
          }
      });
      buildDervis();
    }
  </script>

  <div class="search">
    <button onclick="findVerb()">爪 驻注</button>
    <input id="verb-input" placeholder=' : 爪, .爪., 爪  爪..'>
  </div>
  
  <h2>专转</h2>
  <table id="derivs">
  </table>
  <footer id="footer">漏  转 砖专转 "专 砖转 转专 Ph.D Э 专 专转, 专住驻 庐</footer>
</body>
</html>